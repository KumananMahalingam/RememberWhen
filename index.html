<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Aid System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Memory Aid System</h1>
            <p>Real-time conversation capture and context display</p>
        </header>

        <div class="grid">
            <!-- Left Column: Camera Feed + Controls -->
            <div class="col-left">
                <!-- Camera Feed -->
                <div class="camera-card" id="cameraCard">
                    <video id="video" autoplay playsinline muted></video>

                    <!-- Status Badge -->
                    <div class="status-badge" id="statusBadge" style="display: none;">
                        <span class="status-dot"></span>
                        <span>Connected</span>
                    </div>

                    <!-- Person Context Overlay -->
                    <div class="person-overlay" id="personOverlay" style="display: none;">
                        <div class="person-header">
                            <div class="person-icon">üë§</div>
                            <div class="person-info">
                                <h3 id="personName">Loading...</h3>
                                <p id="personRelationship">...</p>
                            </div>
                            <div class="person-meta">
                                <div class="confidence">
                                    <span class="confidence-label">Confidence</span>
                                    <span class="confidence-value" id="confidenceValue">95%</span>
                                </div>
                                <button class="dismiss-btn" id="dismissBtn">‚úï</button>
                            </div>
                        </div>
                        <div class="divider"></div>
                        <div class="person-details">
                            <div class="detail-item">
                                <span class="detail-icon">üïê</span>
                                <span class="detail-label">Last visit:</span>
                                <span class="detail-value" id="lastVisit">...</span>
                            </div>
                            <div class="detail-item context">
                                <span class="detail-icon">üí¨</span>
                                <p class="context-text" id="recentContext">...</p>
                            </div>
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                        <p>Loading memory context...</p>
                    </div>

                    <!-- Error/Placeholder State -->
                    <div class="placeholder" id="placeholder">
                        <div class="placeholder-icon">üìπ</div>
                        <p>Click "Start Camera" to begin capturing video and audio</p>
                    </div>
                </div>

                <!-- Control Bar -->
                <div class="control-bar">
                    <button class="btn btn-primary" id="startBtn">
                        <span>üìπ</span>
                        Start Camera
                    </button>
                    <button class="btn btn-danger" id="stopBtn" style="display: none;">
                        <span>‚èπÔ∏è</span>
                        Stop Camera
                    </button>
                    <button class="btn btn-secondary" id="micBtn" disabled>
                        <span>üé§</span>
                        Unmute Mic
                    </button>
                    <button class="btn btn-ghost" id="clearBtn">
                        <span>üóëÔ∏è</span>
                        Clear Transcripts
                    </button>
                </div>
            </div>

            <!-- Right Column: People Manager + Transcription -->
            <div class="col-right">
                <!-- People Manager -->
                <div class="card people-card">
                    <div class="card-header">
                        <h2>üë• Known People</h2>
                        <button class="btn btn-sm" id="addPersonBtn">
                            <span>‚ûï</span>
                            Add Person
                        </button>
                    </div>
                    <div class="card-content">
                        <ul class="people-list" id="peopleList">
                            <li class="person-item">
                                <button class="person-btn" data-id="sarah_001">
                                    <div>
                                        <p class="person-name">Sarah</p>
                                        <p class="person-rel">Daughter</p>
                                    </div>
                                </button>
                                <button class="remove-btn" data-id="sarah_001">üóëÔ∏è</button>
                            </li>
                        </ul>
                        <p class="people-hint" id="peopleHint" style="display: none;">
                            Click a person to manually identify the current speaker
                        </p>
                    </div>
                </div>

                <!-- Transcription Panel -->
                <div class="card transcript-card">
                    <div class="card-header">
                        <h2>Live Transcription</h2>
                        <span class="listening-status" id="listeningStatus">
                            <span>üé§</span>
                            <span>Not listening</span>
                        </span>
                    </div>
                    <div class="card-content transcript-content">
                        <div class="transcript-scroll" id="transcriptScroll">
                            <p class="transcript-empty" id="transcriptEmpty">
                                Start the camera to begin transcription
                            </p>
                            <div class="transcript-list" id="transcriptList"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Person Modal -->
    <div class="modal" id="addPersonModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Register New Person</h2>
                <button class="modal-close" id="modalClose">‚úï</button>
            </div>
            <form id="addPersonForm">
                <div class="form-group">
                    <label for="personNameInput">Name</label>
                    <input type="text" id="personNameInput" placeholder="Enter person's name" required>
                </div>
                <div class="form-group">
                    <label for="relationshipSelect">Relationship</label>
                    <select id="relationshipSelect" required>
                        <option value="">Select relationship</option>
                        <option value="Daughter">Daughter</option>
                        <option value="Son">Son</option>
                        <option value="Spouse">Spouse</option>
                        <option value="Grandchild">Grandchild</option>
                        <option value="Friend">Friend</option>
                        <option value="Caregiver">Caregiver</option>
                        <option value="Doctor">Doctor</option>
                        <option value="Neighbor">Neighbor</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost" id="modalCancel">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Person</button>
                </div>
            </form>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>